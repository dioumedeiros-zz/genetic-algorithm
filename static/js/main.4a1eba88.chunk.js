(this["webpackJsonpgenetic-algorithm"]=this["webpackJsonpgenetic-algorithm"]||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t),function(e){var t=n(10),a=n(2),i=n(11),c=n(12),r=["A","B","C","D","E","F","G","H","I","J"],o=function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,[{key:"store",value:function(e){var t=JSON.parse(localStorage.getItem("cities")),n=t?t.length:0,i={id:r[n],name:e};t=t?[].concat(Object(a.a)(t),[i]):[i],localStorage.setItem("cities",JSON.stringify(t))}},{key:"update",value:function(e){var t=JSON.parse(localStorage.getItem("cities")),n=t.find((function(t){return t.id===e.current.id}));if(n.distance){var i=n.distance.filter((function(t){return t.id!==e.destiny.id}));n.distance=[].concat(Object(a.a)(i),[e.destiny]);var c=t.find((function(t){return t.id===e.destiny.id}));if(c.distance){var r=c.distance.filter((function(e){return e.id!==n.id}));c.distance=[].concat(Object(a.a)(r),[{id:n.id,time:e.destiny.time}])}else c.distance=[],c.distance=[].concat(Object(a.a)(c.distance),[{id:n.id,time:e.destiny.time}])}else{n.distance=[],n.distance=[].concat(Object(a.a)(n.distance),[e.destiny]);var o=t.find((function(t){return t.id===e.destiny.id}));o.distance=[],o.distance=[].concat(Object(a.a)(o.distance),[{id:n.id,time:e.destiny.time}])}var l=t.filter((function(e){return e.id!==n.id}));l=[].concat(Object(a.a)(l),[n]),localStorage.setItem("cities",JSON.stringify(l))}},{key:"delete",value:function(e){var n,a=JSON.parse(localStorage.getItem("cities")).filter((function(t){return t.id!==e.id})),i=Object(t.a)(a);try{for(i.s();!(n=i.n()).done;){var c=n.value;c.name,e.name,c.distance=c.distance.filter((function(t){return t.id!==e.id}))}}catch(r){i.e(r)}finally{i.f()}localStorage.setItem("cities",JSON.stringify(a))}}]),e}();e.exports={CityController:o}}.call(this,n(15)(e))},,,function(e,t,n){e.exports=n(33)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t),function(e){var t=n(2),a=n(11),i=n(12),c=function(){function e(t,n){Object(a.a)(this,e),this.cities=t,this.MUTATION=2,this.POPULATION_SIZE=20,this.GENERATIONS=n,this.best=[]}return Object(i.a)(e,[{key:"createChromosome",value:function(e){for(var n=[],a=Object(t.a)(e);a.length>0;){var i=Math.ceil(Math.random()*a.length-1);n=[].concat(Object(t.a)(n),[a[i]]),a.splice(i,1)}return n}},{key:"getDistance",value:function(e,t){var n=this.cities.find((function(t){return t.id===e.id})).distance.find((function(e){return e.id===t.id}));return n?Number(n.time):0}},{key:"fitness",value:function(e){var t=this,n=e.chromosome[0],a=0,i=n;e.chromosome.forEach((function(e){var i=e,c=t.getDistance(n,i);a+=c,n=i})),a+=this.getDistance(n,i),e.allDistance=a}},{key:"selection",value:function(e){var t=[],n=Math.floor(e.length/2);this.sortPopulation(e);for(var a=0;a<n;a++)t.push(e[a]);return t[Math.floor(Math.random()*n)]}},{key:"crossover",value:function(e,t){var n=Math.ceil(Math.random()*e.length-1);return this.crossingGenes(e,t,n),this.validateDuplicity(n,e,t),[{chromosome:e},{chromosome:t}]}},{key:"crossingGenes",value:function(e,t,n){var a=e[n];e[n]=t[n],t[n]=a}},{key:"validateDuplicity",value:function(e,t,n){var a=[];for(a.push(e);;){var i=this.getDuplicated(t,a);if(-1===i)break;this.crossingGenes(t,n,i),a.push(i)}}},{key:"getDuplicated",value:function(e,t){for(var n=function(n){return t.includes(n)?"continue":e.filter((function(t){return t.id===e[n].id})).length>1?{v:n}:void 0},a=0;a<e.length;a++){var i=n(a);switch(i){case"continue":continue;default:if("object"===typeof i)return i.v}}return-1}},{key:"transform",value:function(e){var t=Math.ceil(1),n=Math.floor(100);if(Math.floor(Math.random()*(n-t))<=this.MUTATION){var a=Math.ceil(Math.random()*e.length-1),i=Math.ceil(Math.random()*e.length-1),c=e[a];e[a]=e[i],e[i]=c}return{chromosome:e}}},{key:"sortPopulation",value:function(e){return e.sort((function(e,t){return e.allDistance<t.allDistance?-1:e.allDistance>t.allDistance?1:0}))}},{key:"getBestDistance",value:function(e){e.allDistance<this.best.allDistance&&(e.generation=this.GENERATIONS,this.best=e)}},{key:"initialize",value:function(){for(var e,n=this,a=[];a.length<this.POPULATION_SIZE;)e={chromosome:this.createChromosome(this.cities),generation:1},a.push(e);a.forEach((function(e){n.fitness(e)})),this.best=a[0],this.sortPopulation(a);for(var i=1;i<=this.GENERATIONS;i++){for(var c=[],r=0;r<this.POPULATION_SIZE;r+=2){var o=this.selection(a),l=this.selection(a),s=this.crossover(o.chromosome,l.chromosome);c=[].concat(Object(t.a)(c),[this.transform(s[0].chromosome)]),c=[].concat(Object(t.a)(c),[this.transform(s[1].chromosome)])}a=[],(a=c).forEach((function(e){n.fitness(e)})),this.sortPopulation(a);var u=a[0];this.getBestDistance(u)}return this.best}}]),e}();e.exports={GeneticAlgorithim:c}}.call(this,n(15)(e))},,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),c=n(4),r=n.n(c),o=(n(22),n(6)),l=n(10),s=n(3),u=n(8);n(23);function m(){return i.a.createElement("div",{className:"container-header"},i.a.createElement("div",{className:"content-header"},i.a.createElement("nav",null,i.a.createElement("div",null,"Algoritmo Gen\xe9tico"),i.a.createElement("p",null,"Problema do caixeiro viajante"))))}function d(e){var t=e.current,n=e.destiny,c=e.addDistance,r=Object(a.useState)(""),o=Object(s.a)(r,2),l=o[0],u=o[1];return Object(a.useEffect)((function(){if(t.distance){var e=t.distance.find((function(e){return e.id===n.id}));u(e?e.time:"")}}),[t,n]),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,t&&t.name),i.a.createElement("div",null,n&&n.name),i.a.createElement("input",{type:"text",maxLength:"3",value:l,onChange:function(e){Number(e.target.value)?(console.log(Number(e.target.value)),u(e.target.value)):u(0)},onBlur:function(){return c({current:t,destiny:{id:n.id,time:l}})}}))}n(24);var f=n(14);function v(e){var t=e.filter,n=Object(a.useState)([]),c=Object(s.a)(n,2),r=c[0],o=c[1],l=Object(a.useState)({}),u=Object(s.a)(l,2),m=u[0],v=u[1];function h(e){(new f).update(e)}return Object(a.useEffect)((function(){var e=JSON.parse(localStorage.getItem("cities"));if(e){var n=e.filter((function(e){return e.id!==t}));o(n);var a=e.find((function(e){return e.id===t}));v(a)}}),[t]),i.a.createElement("div",{className:"grid"},i.a.createElement("div",{className:"header"},i.a.createElement("div",null,"Origem"),i.a.createElement("div",null,"Destino"),i.a.createElement("div",null,"Dist\xe2ncia")),i.a.createElement("div",{className:"items"},r&&r.map((function(e){return i.a.createElement(d,{key:e.id,current:m,destiny:e,addDistance:h})}))))}var h=n(16);n(25);function E(e){var t=e.open,n=e.data,a=e.close;return(i.a.createElement(h.a,{open:t,modal:!0,closeOnDocumentClick:!0,onClose:a},(function(e){return i.a.createElement("div",{className:"modal"},i.a.createElement("header",null,i.a.createElement("span",null,"Melhor caminho")),i.a.createElement("ul",null,n.chromosome.map((function(e){return i.a.createElement("div",{key:e.id},i.a.createElement("li",null,e.name),i.a.createElement(u.c,null))})),i.a.createElement("li",{className:"last"},n.chromosome[0].name)),i.a.createElement("hr",null),i.a.createElement("div",{className:"grid-modal"},i.a.createElement("span",{className:"title"},"Dist\xe2ncia"),i.a.createElement("span",{className:"value"},n.allDistance),i.a.createElement("span",{className:"title"},"Gera\xe7\xf5es"),i.a.createElement("span",{className:"value"},n.generation)),i.a.createElement("div",{className:"control"},i.a.createElement("button",{className:"close",onClick:e},"Confirmar")))})))}n(26);var g=n(14).CityController,O=n(27).GeneticAlgorithim;function b(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)([]),d=Object(s.a)(r,2),f=d[0],h=d[1],b=Object(a.useState)("A"),p=Object(s.a)(b,2),N=p[0],y=p[1],j=Object(a.useState)(),S=Object(s.a)(j,2),D=S[0],I=S[1],k=Object(a.useState)(!1),C=Object(s.a)(k,2),M=C[0],A=C[1],G=Object(a.useState)(1e3),J=Object(s.a)(G,2),T=J[0],P=J[1];function x(){var e=JSON.parse(localStorage.getItem("cities"));if(e){h(e);var t=e.length-1;y(e[t].id),setTimeout((function(){document.querySelector(".select").selectedIndex=String(t)}),100)}}return Object(a.useEffect)((function(){x()}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(m,null),i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"register"},i.a.createElement("input",{placeholder:"Insira uma cidade",value:n,onChange:function(e){return c(e.target.value)}}),i.a.createElement("button",{onClick:function(){var e=JSON.parse(localStorage.getItem("cities"));!e||e.length<10?((new g).store(n),x(),c("")):o.b.error("No m\xe1ximo 10 cidades")}},i.a.createElement(u.a,{size:25}),"CADASTRAR")),i.a.createElement("div",{className:"content"},i.a.createElement("div",{className:"controls"},i.a.createElement("div",{className:"city-selected"},i.a.createElement("select",{className:"select",onChange:function(e){return y(e.target.value)}},f.map((function(e){return i.a.createElement("option",{key:e.id,value:e.id},e.name)}))),i.a.createElement(u.b,{size:28,color:"#81259d",onClick:function(){var e=JSON.parse(localStorage.getItem("cities")).find((function(e){return e.id===N}));(new g).delete(e),x()}})),i.a.createElement("div",{className:"generation"},i.a.createElement("label",null,"Gera\xe7\xf5es"),i.a.createElement("input",{placeholder:"Gera\xe7\xf5es",value:T,onChange:function(e){return P(e.target.value)}}))),i.a.createElement(v,{filter:N})),i.a.createElement("button",{className:"btn-execute",onClick:function(){var e=JSON.parse(localStorage.getItem("cities"));if(function(e){var t,n=Object(l.a)(e);try{var a=function(){var e=t.value;if(!e.distance)return o.b.error("Dist\xe2ncia inv\xe1lida. Verifique os destinos da cidade ".concat(e.name)),{v:!1};e.distance.forEach((function(t){if(!t.time)return o.b.error("Dist\xe2ncia inv\xe1lida. Verifique os destinos da cidade ".concat(e.name)),!1}))};for(n.s();!(t=n.n()).done;){var i=a();if("object"===typeof i)return i.v}}catch(c){n.e(c)}finally{n.f()}return!0}(e)){var t=new O(e,T).initialize();t&&(I(t),A(!0))}}},"EXECUTAR ALGORITMO"),i.a.createElement(E,{open:M,data:D,close:function(){A(!1)}})))}n(30),n(31),n(32);var p=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(b,null),i.a.createElement(o.a,{autoClose:6e3}))};r.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(p,null)),document.getElementById("root"))}],[[17,1,2]]]);
//# sourceMappingURL=main.4a1eba88.chunk.js.map