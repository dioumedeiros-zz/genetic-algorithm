(this["webpackJsonpgenetic-algorithm"]=this["webpackJsonpgenetic-algorithm"]||[]).push([[0],[,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(10),i=a(2),c=a(12),r=a(13),o=["A","B","C","D","E","F","G","H","I","J"],l=function(){function e(){Object(c.a)(this,e)}return Object(r.a)(e,[{key:"store",value:function(e){var t=JSON.parse(localStorage.getItem("cities")),a=t?t.length:0,n={id:o[a],name:e};t=t?[].concat(Object(i.a)(t),[n]):[n],localStorage.setItem("cities",JSON.stringify(t))}},{key:"update",value:function(e){var t=JSON.parse(localStorage.getItem("cities")),a=t.find((function(t){return t.id===e.current.id}));if(a.distance){var n=a.distance.filter((function(t){return t.id!==e.destiny.id}));a.distance=[].concat(Object(i.a)(n),[e.destiny]);var c=t.find((function(t){return t.id===e.destiny.id}));if(c.distance){var r=c.distance.filter((function(e){return e.id!==a.id}));c.distance=[].concat(Object(i.a)(r),[{id:a.id,time:e.destiny.time}])}else c.distance=[],c.distance=[].concat(Object(i.a)(c.distance),[{id:a.id,time:e.destiny.time}])}else{a.distance=[],a.distance=[].concat(Object(i.a)(a.distance),[e.destiny]);var o=t.find((function(t){return t.id===e.destiny.id}));o.distance=[],o.distance=[].concat(Object(i.a)(o.distance),[{id:a.id,time:e.destiny.time}])}var l=t.filter((function(e){return e.id!==a.id}));l=[].concat(Object(i.a)(l),[a]),localStorage.setItem("cities",JSON.stringify(l))}},{key:"delete",value:function(e){var t,a=JSON.parse(localStorage.getItem("cities")).filter((function(t){return t.id!==e.id})),i=Object(n.a)(a);try{for(i.s();!(t=i.n()).done;){var c=t.value;c.name,e.name,c.distance=c.distance.filter((function(t){return t.id!==e.id}))}}catch(r){i.e(r)}finally{i.f()}localStorage.setItem("cities",JSON.stringify(a))}}]),e}();t.default=l},,,,,function(e,t,a){e.exports=a(33)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t),function(e){var t=a(2),n=a(12),i=a(13),c=function(){function e(t,a){Object(n.a)(this,e),this.cities=t,this.MUTATION=2,this.POPULATION_SIZE=20,this.GENERATIONS=a,this.best=[]}return Object(i.a)(e,[{key:"createChromosome",value:function(e){for(var a=[],n=Object(t.a)(e);n.length>0;){var i=Math.ceil(Math.random()*n.length-1);a=[].concat(Object(t.a)(a),[n[i]]),n.splice(i,1)}return a}},{key:"getDistance",value:function(e,t){var a=this.cities.find((function(t){return t.id===e.id})).distance.find((function(e){return e.id===t.id}));return a?Number(a.time):0}},{key:"fitness",value:function(e){var t=this,a=e.chromosome[0],n=0,i=a;e.chromosome.forEach((function(e){var i=e,c=t.getDistance(a,i);n+=c,a=i})),n+=this.getDistance(a,i),e.allDistance=n}},{key:"selection",value:function(e){var t=[],a=Math.floor(e.length/2);this.sortPopulation(e);for(var n=0;n<a;n++)t.push(e[n]);return t[Math.floor(Math.random()*a)]}},{key:"crossover",value:function(e,t){var a=Math.ceil(Math.random()*e.length-1);return this.crossingGenes(e,t,a),this.validateDuplicity(a,e,t),[{chromosome:e},{chromosome:t}]}},{key:"crossingGenes",value:function(e,t,a){var n=e[a];e[a]=t[a],t[a]=n}},{key:"validateDuplicity",value:function(e,t,a){var n=[];for(n.push(e);;){var i=this.getDuplicated(t,n);if(-1===i)break;this.crossingGenes(t,a,i),n.push(i)}}},{key:"getDuplicated",value:function(e,t){for(var a=function(a){return t.includes(a)?"continue":e.filter((function(t){return t.id===e[a].id})).length>1?{v:a}:void 0},n=0;n<e.length;n++){var i=a(n);switch(i){case"continue":continue;default:if("object"===typeof i)return i.v}}return-1}},{key:"transform",value:function(e){var t=Math.ceil(1),a=Math.floor(100);if(Math.floor(Math.random()*(a-t))<=this.MUTATION){var n=Math.ceil(Math.random()*e.length-1),i=Math.ceil(Math.random()*e.length-1),c=e[n];e[n]=e[i],e[i]=c}return{chromosome:e}}},{key:"sortPopulation",value:function(e){return e.sort((function(e,t){return e.allDistance<t.allDistance?-1:e.allDistance>t.allDistance?1:0}))}},{key:"getBestDistance",value:function(e){e.allDistance<this.best.allDistance&&(e.generation=this.GENERATIONS,this.best=e)}},{key:"initialize",value:function(){for(var e,a=this,n=[];n.length<this.POPULATION_SIZE;)e={chromosome:this.createChromosome(this.cities),generation:1},n.push(e);n.forEach((function(e){a.fitness(e)})),this.best=n[0],this.sortPopulation(n);for(var i=1;i<=this.GENERATIONS;i++){for(var c=[],r=0;r<this.POPULATION_SIZE;r+=2){var o=this.selection(n),l=this.selection(n),s=this.crossover(o.chromosome,l.chromosome);c=[].concat(Object(t.a)(c),[this.transform(s[0].chromosome)]),c=[].concat(Object(t.a)(c),[this.transform(s[1].chromosome)])}n=[],(n=c).forEach((function(e){a.fitness(e)})),this.sortPopulation(n);var u=n[0];this.getBestDistance(u)}return this.best}}]),e}();e.exports={GeneticAlgorithim:c}}.call(this,a(27)(e))},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),c=a(4),r=a.n(c),o=(a(21),a(6)),l=a(10),s=a(3),u=a(8);a(22);function m(){return i.a.createElement("div",{className:"container-header"},i.a.createElement("div",{className:"content-header"},i.a.createElement("nav",null,i.a.createElement("div",null,"Algoritmo Gen\xe9tico"),i.a.createElement("p",null,"Problema do caixeiro viajante"))))}function d(e){var t=e.current,a=e.destiny,c=e.addDistance,r=Object(n.useState)(""),o=Object(s.a)(r,2),l=o[0],u=o[1];return Object(n.useEffect)((function(){if(t.distance){var e=t.distance.find((function(e){return e.id===a.id}));u(e?e.time:"")}}),[t,a]),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,t&&t.name),i.a.createElement("div",null,a&&a.name),i.a.createElement("input",{type:"text",maxLength:"3",value:l,onChange:function(e){Number(e.target.value)?(console.log(Number(e.target.value)),u(e.target.value)):u(0)},onBlur:function(){return c({current:t,destiny:{id:a.id,time:l}})}}))}a(23);var f=a(11);function v(e){var t=e.filter,a=Object(n.useState)([]),c=Object(s.a)(a,2),r=c[0],o=c[1],l=Object(n.useState)({}),u=Object(s.a)(l,2),m=u[0],v=u[1];function h(e){(new f).update(e)}return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("cities"));if(e){var a=e.filter((function(e){return e.id!==t}));o(a);var n=e.find((function(e){return e.id===t}));v(n)}}),[t]),i.a.createElement("div",{className:"grid"},i.a.createElement("div",{className:"header"},i.a.createElement("div",null,"Origem"),i.a.createElement("div",null,"Destino"),i.a.createElement("div",null,"Dist\xe2ncia")),i.a.createElement("div",{className:"items"},r&&r.map((function(e){return i.a.createElement(d,{key:e.id,current:m,destiny:e,addDistance:h})}))))}var h=a(15);a(24);function E(e){var t=e.open,a=e.data,n=e.close;return(i.a.createElement(h.a,{open:t,modal:!0,closeOnDocumentClick:!0,onClose:n},(function(e){return i.a.createElement("div",{className:"modal"},i.a.createElement("header",null,i.a.createElement("span",null,"Melhor caminho")),i.a.createElement("ul",null,a.chromosome.map((function(e){return i.a.createElement("div",{key:e.id},i.a.createElement("li",null,e.name),i.a.createElement(u.c,null))})),i.a.createElement("li",{className:"last"},a.chromosome[0].name)),i.a.createElement("hr",null),i.a.createElement("div",{className:"grid-modal"},i.a.createElement("span",{className:"title"},"Dist\xe2ncia"),i.a.createElement("span",{className:"value"},a.allDistance),i.a.createElement("span",{className:"title"},"Gera\xe7\xf5es"),i.a.createElement("span",{className:"value"},a.generation)),i.a.createElement("div",{className:"control"},i.a.createElement("button",{className:"close",onClick:e},"Confirmar")))})))}a(25);var g=a(11),O=a(26).GeneticAlgorithim;function b(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)([]),d=Object(s.a)(r,2),f=d[0],h=d[1],b=Object(n.useState)("A"),p=Object(s.a)(b,2),N=p[0],y=p[1],j=Object(n.useState)(),S=Object(s.a)(j,2),D=S[0],I=S[1],k=Object(n.useState)(!1),M=Object(s.a)(k,2),A=M[0],C=M[1],G=Object(n.useState)(1e3),J=Object(s.a)(G,2),T=J[0],P=J[1];function x(){var e=JSON.parse(localStorage.getItem("cities"));if(e){h(e);var t=e.length-1;y(e[t].id),setTimeout((function(){document.querySelector(".select").selectedIndex=String(t)}),100)}}return Object(n.useEffect)((function(){x()}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(m,null),i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"register"},i.a.createElement("input",{placeholder:"Insira uma cidade",value:a,onChange:function(e){return c(e.target.value)}}),i.a.createElement("button",{onClick:function(){var e=JSON.parse(localStorage.getItem("cities"));!e||e.length<10?((new g.default).store(a),x(),c("")):o.b.error("No m\xe1ximo 10 cidades")}},i.a.createElement(u.a,{size:25}),"CADASTRAR")),i.a.createElement("div",{className:"content"},i.a.createElement("div",{className:"controls"},i.a.createElement("div",{className:"city-selected"},i.a.createElement("select",{className:"select",onChange:function(e){return y(e.target.value)}},f.map((function(e){return i.a.createElement("option",{key:e.id,value:e.id},e.name)}))),i.a.createElement(u.b,{size:28,color:"#81259d",onClick:function(){var e=JSON.parse(localStorage.getItem("cities")).find((function(e){return e.id===N}));(new g.default).delete(e),x()}})),i.a.createElement("div",{className:"generation"},i.a.createElement("label",null,"Gera\xe7\xf5es"),i.a.createElement("input",{placeholder:"Gera\xe7\xf5es",value:T,onChange:function(e){return P(e.target.value)}}))),i.a.createElement(v,{filter:N})),i.a.createElement("button",{className:"btn-execute",onClick:function(){var e=JSON.parse(localStorage.getItem("cities"));if(function(e){var t,a=Object(l.a)(e);try{var n=function(){var e=t.value;if(!e.distance)return o.b.error("Dist\xe2ncia inv\xe1lida. Verifique os destinos da cidade ".concat(e.name)),{v:!1};e.distance.forEach((function(t){if(!t.time)return o.b.error("Dist\xe2ncia inv\xe1lida. Verifique os destinos da cidade ".concat(e.name)),!1}))};for(a.s();!(t=a.n()).done;){var i=n();if("object"===typeof i)return i.v}}catch(c){a.e(c)}finally{a.f()}return!0}(e)){var t=new O(e,T).initialize();t&&(I(t),C(!0))}}},"EXECUTAR ALGORITMO"),i.a.createElement(E,{open:A,data:D,close:function(){C(!1)}})))}a(30),a(31),a(32);var p=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(b,null),i.a.createElement(o.a,{autoClose:6e3}))};r.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(p,null)),document.getElementById("root"))}],[[16,1,2]]]);
//# sourceMappingURL=main.1ffd3313.chunk.js.map