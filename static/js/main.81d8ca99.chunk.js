(this["webpackJsonpgenetic-algorithm"]=this["webpackJsonpgenetic-algorithm"]||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,a){e.exports=a(30)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),c=a(4),r=a.n(c),o=(a(20),a(6)),l=a(10),s=a(3),u=a(8);a(21);function m(){return i.a.createElement("div",{className:"container-header"},i.a.createElement("div",{className:"content-header"},i.a.createElement("nav",null,i.a.createElement("div",null,"Algoritmo Gen\xe9tico"),i.a.createElement("p",null,"Problema do caixeiro viajante"))))}function d(e){var t=e.current,a=e.destiny,c=e.addDistance,r=Object(n.useState)(""),o=Object(s.a)(r,2),l=o[0],u=o[1];return Object(n.useEffect)((function(){if(t.distance){var e=t.distance.find((function(e){return e.id===a.id}));u(e?e.time:"")}}),[t,a]),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,t&&t.name),i.a.createElement("div",null,a&&a.name),i.a.createElement("input",{type:"text",maxLength:"3",value:l,onChange:function(e){Number(e.target.value)?u(e.target.value):u(0)},onBlur:function(){return c({current:t,destiny:{id:a.id,time:l}})}}))}a(22);var f=a(2),v=a(11),h=a(12),E=["A","B","C","D","E","F","G","H","I","J"],g=function(){function e(){Object(v.a)(this,e)}return Object(h.a)(e,[{key:"store",value:function(e){var t=JSON.parse(localStorage.getItem("cities")),a=t?t.length:0,n={id:E[a],name:e};t=t?[].concat(Object(f.a)(t),[n]):[n],localStorage.setItem("cities",JSON.stringify(t))}},{key:"update",value:function(e){var t=JSON.parse(localStorage.getItem("cities")),a=t.find((function(t){return t.id===e.current.id}));if(a.distance){var n=a.distance.filter((function(t){return t.id!==e.destiny.id}));a.distance=[].concat(Object(f.a)(n),[e.destiny]);var i=t.find((function(t){return t.id===e.destiny.id}));if(i.distance){var c=i.distance.filter((function(e){return e.id!==a.id}));i.distance=[].concat(Object(f.a)(c),[{id:a.id,time:e.destiny.time}])}else i.distance=[],i.distance=[].concat(Object(f.a)(i.distance),[{id:a.id,time:e.destiny.time}])}else{a.distance=[],a.distance=[].concat(Object(f.a)(a.distance),[e.destiny]);var r=t.find((function(t){return t.id===e.destiny.id}));r.distance=[],r.distance=[].concat(Object(f.a)(r.distance),[{id:a.id,time:e.destiny.time}])}var o=t.filter((function(e){return e.id!==a.id}));o=[].concat(Object(f.a)(o),[a]),localStorage.setItem("cities",JSON.stringify(o))}},{key:"delete",value:function(e){var t,a=JSON.parse(localStorage.getItem("cities")).filter((function(t){return t.id!==e.id})),n=Object(l.a)(a);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.name,e.name,i.distance=i.distance.filter((function(t){return t.id!==e.id}))}}catch(c){n.e(c)}finally{n.f()}localStorage.setItem("cities",JSON.stringify(a))}}]),e}();function O(e){var t=e.filter,a=Object(n.useState)([]),c=Object(s.a)(a,2),r=c[0],o=c[1],l=Object(n.useState)({}),u=Object(s.a)(l,2),m=u[0],f=u[1];function v(e){(new g).update(e)}return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("cities"));if(e){var a=e.filter((function(e){return e.id!==t}));o(a);var n=e.find((function(e){return e.id===t}));f(n)}}),[t]),i.a.createElement("div",{className:"grid"},i.a.createElement("div",{className:"header"},i.a.createElement("div",null,"Origem"),i.a.createElement("div",null,"Destino"),i.a.createElement("div",null,"Dist\xe2ncia")),i.a.createElement("div",{className:"items"},r&&r.map((function(e){return i.a.createElement(d,{key:e.id,current:m,destiny:e,addDistance:v})}))))}var b=a(14);a(23);function p(e){var t=e.open,a=e.data,n=e.close;return(i.a.createElement(b.a,{open:t,modal:!0,closeOnDocumentClick:!0,onClose:n},(function(e){return i.a.createElement("div",{className:"modal"},i.a.createElement("header",null,i.a.createElement("span",null,"Melhor caminho")),i.a.createElement("ul",null,a.chromosome.map((function(e){return i.a.createElement("div",{key:e.id},i.a.createElement("li",null,e.name),i.a.createElement(u.c,null))})),i.a.createElement("li",{className:"last"},a.chromosome[0].name)),i.a.createElement("hr",null),i.a.createElement("div",{className:"grid-modal"},i.a.createElement("span",{className:"title"},"Dist\xe2ncia"),i.a.createElement("span",{className:"value"},a.allDistance),i.a.createElement("span",{className:"title"},"Gera\xe7\xf5es"),i.a.createElement("span",{className:"value"},a.generation)),i.a.createElement("div",{className:"control"},i.a.createElement("button",{className:"close",onClick:e},"Confirmar")))})))}a(24);var N=function(){function e(t,a){Object(v.a)(this,e),this.cities=t,this.POPULATION_SIZE=20,this.MUTATION=2,this.GENERATIONS=a,this.best=[]}return Object(h.a)(e,[{key:"createChromosome",value:function(e){for(var t=[],a=Object(f.a)(e);a.length>0;){var n=Math.ceil(Math.random()*a.length-1);t=[].concat(Object(f.a)(t),[a[n]]),a.splice(n,1)}return t}},{key:"getDistance",value:function(e,t){var a=this.cities.find((function(t){return t.id===e.id})).distance.find((function(e){return e.id===t.id}));return a?Number(a.time):0}},{key:"fitness",value:function(e){var t=this,a=e.chromosome[0],n=0,i=a;e.chromosome.forEach((function(e){var i=e,c=t.getDistance(a,i);n+=c,a=i})),n+=this.getDistance(a,i),e.allDistance=n}},{key:"selection",value:function(e){var t=[],a=Math.floor(e.length/2);this.sortPopulation(e);for(var n=0;n<a;n++)t.push(e[n]);return t[Math.floor(Math.random()*a)]}},{key:"crossover",value:function(e,t){var a=Math.ceil(Math.random()*e.length-1);return this.crossingGenes(e,t,a),this.validateDuplicity(a,e,t),[{chromosome:e},{chromosome:t}]}},{key:"crossingGenes",value:function(e,t,a){var n=e[a];e[a]=t[a],t[a]=n}},{key:"validateDuplicity",value:function(e,t,a){var n=[];for(n.push(e);;){var i=this.getDuplicated(t,n);if(-1===i)break;this.crossingGenes(t,a,i),n.push(i)}}},{key:"getDuplicated",value:function(e,t){for(var a=function(a){return t.includes(a)?"continue":e.filter((function(t){return t.id===e[a].id})).length>1?{v:a}:void 0},n=0;n<e.length;n++){var i=a(n);switch(i){case"continue":continue;default:if("object"===typeof i)return i.v}}return-1}},{key:"transform",value:function(e){var t=Math.ceil(1),a=Math.floor(100);if(Math.floor(Math.random()*(a-t))<=this.MUTATION){var n=Math.ceil(Math.random()*e.length-1),i=Math.ceil(Math.random()*e.length-1),c=e[n];e[n]=e[i],e[i]=c}return{chromosome:e}}},{key:"sortPopulation",value:function(e){return e.sort((function(e,t){return e.allDistance<t.allDistance?-1:e.allDistance>t.allDistance?1:0}))}},{key:"getBestDistance",value:function(e){e.allDistance<this.best.allDistance&&(e.generation=this.GENERATIONS,this.best=e)}},{key:"initialize",value:function(){for(var e,t=this,a=[];a.length<this.POPULATION_SIZE;)e={chromosome:this.createChromosome(this.cities),generation:1},a.push(e);a.forEach((function(e){t.fitness(e)})),this.best=a[0],this.sortPopulation(a);for(var n=1;n<=this.GENERATIONS;n++){for(var i=[],c=0;c<this.POPULATION_SIZE;c+=2){var r=this.selection(a),o=this.selection(a),l=this.crossover(r.chromosome,o.chromosome);i=[].concat(Object(f.a)(i),[this.transform(l[0].chromosome)]),i=[].concat(Object(f.a)(i),[this.transform(l[1].chromosome)])}a=[],(a=i).forEach((function(e){t.fitness(e)})),this.sortPopulation(a);var s=a[0];this.getBestDistance(s)}return this.best}}]),e}();function y(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)([]),d=Object(s.a)(r,2),f=d[0],v=d[1],h=Object(n.useState)("A"),E=Object(s.a)(h,2),b=E[0],y=E[1],j=Object(n.useState)(),S=Object(s.a)(j,2),D=S[0],I=S[1],k=Object(n.useState)(!1),M=Object(s.a)(k,2),C=M[0],A=M[1],J=Object(n.useState)(1e3),T=Object(s.a)(J,2),G=T[0],P=T[1];function w(){var e=JSON.parse(localStorage.getItem("cities"));if(e){v(e);var t=e.length-1;y(e[t].id),setTimeout((function(){document.querySelector(".select").selectedIndex=String(t)}),100)}}return Object(n.useEffect)((function(){w()}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(m,null),i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"register"},i.a.createElement("input",{placeholder:"Insira uma cidade",value:a,onChange:function(e){return c(e.target.value)}}),i.a.createElement("button",{onClick:function(){var e=JSON.parse(localStorage.getItem("cities"));!e||e.length<10?((new g).store(a),w(),c("")):o.b.error("No m\xe1ximo 10 cidades")}},i.a.createElement(u.a,{size:25}),"CADASTRAR")),i.a.createElement("div",{className:"content"},i.a.createElement("div",{className:"controls"},i.a.createElement("div",{className:"city-selected"},i.a.createElement("select",{className:"select",onChange:function(e){return y(e.target.value)}},f.map((function(e){return i.a.createElement("option",{key:e.id,value:e.id},e.name)}))),i.a.createElement(u.b,{size:28,color:"#81259d",onClick:function(){var e=JSON.parse(localStorage.getItem("cities")).find((function(e){return e.id===b}));(new g).delete(e),w()}})),i.a.createElement("div",{className:"generation"},i.a.createElement("label",null,"Gera\xe7\xf5es"),i.a.createElement("input",{placeholder:"Gera\xe7\xf5es",value:G,onChange:function(e){return P(e.target.value)}}))),i.a.createElement(O,{filter:b})),i.a.createElement("button",{className:"btn-execute",onClick:function(){var e=JSON.parse(localStorage.getItem("cities"));if(function(e){var t,a=Object(l.a)(e);try{var n=function(){var e=t.value;if(!e.distance)return o.b.error("Dist\xe2ncia inv\xe1lida. Verifique os destinos da cidade ".concat(e.name)),{v:!1};e.distance.forEach((function(t){if(!t.time)return o.b.error("Dist\xe2ncia inv\xe1lida. Verifique os destinos da cidade ".concat(e.name)),!1}))};for(a.s();!(t=a.n()).done;){var i=n();if("object"===typeof i)return i.v}}catch(c){a.e(c)}finally{a.f()}return!0}(e)){var t=new N(e,G).initialize();t&&(I(t),A(!0))}}},"EXECUTAR ALGORITMO"),i.a.createElement(p,{open:C,data:D,close:function(){A(!1)}})))}a(27),a(28),a(29);var j=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(y,null),i.a.createElement(o.a,{autoClose:6e3}))};r.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(j,null)),document.getElementById("root"))}],[[15,1,2]]]);
//# sourceMappingURL=main.81d8ca99.chunk.js.map